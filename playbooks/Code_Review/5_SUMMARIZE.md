# Document 5: Summarize Review

## Context

- **Playbook**: Code Review
- **Agent**: {{AGENT_NAME}}
- **Project**: {{AGENT_PATH}}
- **Date**: {{DATE}}
- **Working Folder**: {{AUTORUN_FOLDER}}

## Purpose

Compile all review findings into a comprehensive summary with actionable feedback.

## Prerequisites

- `{{AUTORUN_FOLDER}}/REVIEW_SCOPE.md` - PR scope and changed files
- `{{AUTORUN_FOLDER}}/CODE_ISSUES.md` - Code quality issues
- `{{AUTORUN_FOLDER}}/SECURITY_ISSUES.md` - Security findings
- `{{AUTORUN_FOLDER}}/TEST_GAPS.md` - Test coverage gaps

## Tasks

### Task 1: Load All Review Documents

- [ ] **Read all findings**: Load and review:
  - `REVIEW_SCOPE.md`
  - `CODE_ISSUES.md`
  - `SECURITY_ISSUES.md`
  - `TEST_GAPS.md`

### Task 2: Determine Overall Verdict

- [ ] **Assess merge readiness**: Based on findings, determine:
  - **Approve**: No blocking issues, ready to merge
  - **Request Changes**: Has issues that must be fixed
  - **Comment**: Has suggestions but not blocking

- [ ] **Count issues by severity**:
  - Critical issues (blockers)
  - Major issues (should fix)
  - Minor issues (nice to fix)
  - Suggestions (optional)

### Task 3: Prioritize Feedback

- [ ] **Rank issues**: Order all findings by:
  1. Security critical issues
  2. Correctness critical issues
  3. Security high-risk issues
  4. Code major issues
  5. Test coverage gaps
  6. Minor issues and suggestions

### Task 4: Create Summary Document

- [ ] **Write REVIEW_SUMMARY.md**: Create `{{AUTORUN_FOLDER}}/REVIEW_SUMMARY.md`:

```markdown
# Pull Request Review Summary

**Review Date**: {{DATE}}
**Reviewer**: {{AGENT_NAME}}
**Project**: {{AGENT_PATH}}

---

## Overall Verdict: [APPROVE / REQUEST CHANGES / COMMENT]

### Summary
[2-3 sentence overview of the PR and review findings]

---

## Issue Count

| Severity | Count |
|----------|-------|
| Critical | X |
| Major | X |
| Minor | X |
| Suggestions | X |

---

## Blocking Issues (Must Fix)

[List critical and major issues that block merge]

### Issue 1: [Title]
- **Location**: `file.ts:123`
- **Type**: [Security/Correctness/Performance]
- **Description**: [What's wrong]
- **Recommendation**: [How to fix]

---

## Should Fix

[Issues that should be addressed but don't block merge]

---

## Nice to Have

[Minor improvements and suggestions]

---

## Positive Feedback

[Good practices observed, well-done areas]

---

## Test Coverage

[Summary of test coverage status]

---

## Next Steps

1. [First action item]
2. [Second action item]
3. [etc.]

---

*Review generated by Maestro Code Review Playbook*
```

### Task 5: Generate PR Comment (Optional)

- [ ] **Create concise PR comment**: If desired, create a shorter version suitable for posting as a PR comment in `{{AUTORUN_FOLDER}}/PR_COMMENT.md`:

```markdown
## Code Review Summary

**Verdict**: [Approve/Request Changes/Comment]

### Key Findings
- [Most important point]
- [Second most important]
- [Third most important]

### Action Required
- [ ] [First action]
- [ ] [Second action]

<details>
<summary>Full Review Details</summary>

[Expanded details if needed]

</details>

---
*Automated review by Maestro*
```

### Task 6: Final Check

- [ ] **Verify completeness**: Ensure:
  - All issues from individual reviews are captured
  - Verdict is clearly stated
  - Next steps are actionable
  - Tone is constructive and professional

## Success Criteria

- ✅ All review documents read
- ✅ Overall verdict determined
- ✅ Issues prioritized by severity
- ✅ REVIEW_SUMMARY.md created
- ✅ PR_COMMENT.md created (optional)
- ✅ Next steps are clear and actionable

## Status

Mark complete when summary document is created.

---

## Playbook Complete

When all 5 documents are complete, the code review is finished!

**Generated Files:**
- `REVIEW_SCOPE.md` - PR scope analysis
- `CODE_ISSUES.md` - Code quality findings
- `SECURITY_ISSUES.md` - Security analysis
- `TEST_GAPS.md` - Test coverage gaps
- `REVIEW_SUMMARY.md` - Consolidated summary
- `PR_COMMENT.md` - Ready-to-post PR comment (optional)

**Next Steps:**
1. Review the summary document
2. Post feedback to the PR
3. Follow up on any questions from the PR author
