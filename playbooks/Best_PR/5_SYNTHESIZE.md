# Document 5: Synthesize Final Recommendation

## Context

- **Playbook**: Best PR Comparison
- **Agent**: {{AGENT_NAME}}
- **Project**: {{AGENT_PATH}}
- **Date**: {{DATE}}
- **Working Folder**: {{AUTORUN_FOLDER}}

## Purpose

Create the final recommendation with cross-pollination insights and actionable next steps.

## Prerequisites

- `{{AUTORUN_FOLDER}}/EVALUATION_CRITERIA.md` - The evaluation rubric
- `{{AUTORUN_FOLDER}}/PR_A_EVALUATION.md` - PR-A detailed evaluation
- `{{AUTORUN_FOLDER}}/PR_B_EVALUATION.md` - PR-B detailed evaluation
- `{{AUTORUN_FOLDER}}/COMPARISON_MATRIX.md` - Side-by-side comparison

## Tasks

### Task 1: Load All Documents

- [ ] **Read all evaluation documents**: Load the comparison matrix and both individual evaluations.

### Task 2: Extract Gems from Runner-Up

- [ ] **Review runner-up's standout features**: From the losing PR's evaluation, extract the "gems" section.

- [ ] **Assess transferability**: For each gem, determine:
  - Can this be easily added to the winning PR?
  - Is it a pattern/approach that should be adopted?
  - Is it a specific code snippet that could be cherry-picked?

- [ ] **Prioritize gems**: Rank by value-add vs. effort required.

### Task 3: Identify Improvements for Winner

- [ ] **Review winner's concerns**: What issues were noted in the winning PR?

- [ ] **Cross-reference with runner-up**: Does the runner-up handle these concerns better?

- [ ] **Create improvement list**: Specific, actionable items to address before merge.

### Task 4: Formulate Recommendation

- [ ] **For clear winner**: Recommend merging with specific improvements.

- [ ] **For "too close to call"**:
  - Highlight key trade-offs
  - Suggest human decision criteria
  - Recommend synthesis approach if appropriate

### Task 5: Create Final Summary Document

- [ ] **Write BEST_PR_SUMMARY.md**: Create `{{AUTORUN_FOLDER}}/BEST_PR_SUMMARY.md`:

```markdown
# Best PR Comparison Summary

**Comparison Date**: {{DATE}}
**Feature**: [Description of the feature both PRs implement]

---

## Winner: [PR-A / PR-B / Too Close to Call]

[2-3 sentence summary of why this PR is the recommended choice, or why it's too close to call]

---

## Score Summary

| Category | Weight | PR-A | PR-B | Winner |
|----------|--------|------|------|--------|
| Security | 3x | XX | YY | PR-? |
| Correctness | 3x | XX | YY | PR-? |
| Performance | 2x | XX | YY | PR-? |
| Test Coverage | 2x | XX | YY | PR-? |
| Code Quality | 1x | XX | YY | PR-? |
| Documentation | 1x | XX | YY | PR-? |
| PR Size | 1x | XX | YY | PR-? |
| **Weighted Total** | | **XX/65** | **YY/65** | **PR-?** |
| **Percentage** | | **XX%** | **YY%** | |

---

## Key Differentiators

### Why [Winner] Prevailed
[Top 3 reasons the winning PR scored higher]

1. **[Reason 1]**: [Explanation]
2. **[Reason 2]**: [Explanation]
3. **[Reason 3]**: [Explanation]

### Where [Runner-Up] Was Stronger
[Areas where the losing PR actually outperformed]

1. **[Area 1]**: [What they did better]
2. **[Area 2]**: [What they did better]

---

## Gems from the Runner-Up

These valuable approaches from [Runner-Up PR] should be considered for incorporation:

### Gem 1: [Name]
**What**: [Description of the clever solution or approach]
**Where**: [File/function in runner-up PR]
**Transferability**: [Easy / Medium / Hard]
**Recommendation**: [Adopt as-is / Adapt / Consider for future]

### Gem 2: [Name]
**What**: [Description]
**Where**: [Location]
**Transferability**: [Easy / Medium / Hard]
**Recommendation**: [Action]

### Gem 3: [Name]
**What**: [Description]
**Where**: [Location]
**Transferability**: [Easy / Medium / Hard]
**Recommendation**: [Action]

---

## Next Recommended Steps

Before merging [Winning PR], address these improvements:

### Must Do (Blocking)
- [ ] [Critical improvement 1]
- [ ] [Critical improvement 2]

### Should Do (Important)
- [ ] [Important improvement 1]
- [ ] [Important improvement 2]
- [ ] [Incorporate Gem X from runner-up]

### Nice to Have (Optional)
- [ ] [Optional enhancement 1]
- [ ] [Optional enhancement 2]

---

## For Human Review

[Any items that require human judgment or decision-making]

- **Decision Point 1**: [Question for humans]
- **Decision Point 2**: [Question for humans]

---

## Appendix: PR Links

- **PR-A**: [URL]
- **PR-B**: [URL]
- **Recommended**: [Winning PR URL]

---

*Generated by Maestro Best PR Comparison Playbook on {{DATE}}*
```

## Success Criteria

- ✅ All evaluation documents reviewed
- ✅ Gems from runner-up identified and assessed
- ✅ Improvements for winner listed
- ✅ Clear recommendation formulated
- ✅ Next steps are specific and actionable
- ✅ BEST_PR_SUMMARY.md created

## Status

Mark complete when final summary is created.

---

## Playbook Complete

When all 5 documents are complete, the PR comparison is finished!

**Generated Files:**
- `EVALUATION_CRITERIA.md` - The rubric used
- `PR_A_EVALUATION.md` - Detailed PR-A analysis
- `PR_B_EVALUATION.md` - Detailed PR-B analysis
- `COMPARISON_MATRIX.md` - Side-by-side scoring
- `BEST_PR_SUMMARY.md` - Final recommendation

**Next Steps for Human:**
1. Review the BEST_PR_SUMMARY.md
2. Address "Must Do" items on winning PR
3. Consider incorporating gems from runner-up
4. Merge the winning PR
5. Close the losing PR with a kind note referencing the comparison
